{% extends "base.html" %}

{% block title %}Quiz - {{ quiz.quiz_date }}{% endblock %}

{% block content %}
<div class="quiz-container" data-quiz-id="{{ quiz.id }}">
    <div class="quiz-header">
        <h1>Daily Quiz - {{ quiz.quiz_date.strftime('%B %d, %Y') }}</h1>
        <div class="timer" id="timer">
            <span class="timer-label">Time Remaining:</span>
            <span class="timer-value" id="timer-value">06:00</span>
        </div>
    </div>

    <div class="passage-section">
        <h2>Reading Passage</h2>
        <div class="passage-text">
            {{ quiz.passage | safe }}
        </div>
    </div>

    <form id="quiz-form" class="questions-section">
        <input type="hidden" id="submission-id" value="">

        {% for question in quiz.questions %}
        <div class="question-card" data-question-id="{{ question.id }}" data-question-number="{{ question.question_number }}">
            <div class="question-header">
                <span class="question-number">Question {{ question.question_number }}</span>
                <span class="question-meta">{{ question.category }} | {{ question.difficulty }}</span>
            </div>

            <p class="question-text">{{ question.question_text }}</p>

            <div class="options">
                <label class="option">
                    <input type="radio" name="q{{ question.id }}" value="A">
                    <span class="option-label">A</span>
                    <span class="option-text">{{ question.option_a }}</span>
                </label>
                <label class="option">
                    <input type="radio" name="q{{ question.id }}" value="B">
                    <span class="option-label">B</span>
                    <span class="option-text">{{ question.option_b }}</span>
                </label>
                <label class="option">
                    <input type="radio" name="q{{ question.id }}" value="C">
                    <span class="option-label">C</span>
                    <span class="option-text">{{ question.option_c }}</span>
                </label>
                <label class="option">
                    <input type="radio" name="q{{ question.id }}" value="D">
                    <span class="option-label">D</span>
                    <span class="option-text">{{ question.option_d }}</span>
                </label>
            </div>
        </div>
        {% endfor %}

        <div class="quiz-actions">
            <div class="progress-indicator">
                <span id="answered-count">0</span>/10 answered
            </div>
            <button type="submit" class="btn btn-primary btn-large" id="submit-btn">
                Submit Quiz
            </button>
        </div>
    </form>
</div>
{% endblock %}

{% block extra_js %}
<script>
    const TIME_LIMIT = {{ time_limit }};
    const QUIZ_ID = {{ quiz.id }};
</script>
<script src="{{ url_for('static', filename='js/quiz.js') }}"></script>
{% endblock %}
